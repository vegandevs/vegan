<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Compares Dissimilarity Indices for Gradient Detection — rankindex • vegan</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compares Dissimilarity Indices for Gradient Detection — rankindex"><meta name="description" content="Rank correlations between dissimilarity indices
  and gradient separation."><meta property="og:description" content="Rank correlations between dissimilarity indices
  and gradient separation."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">vegan</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.6-7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes"><li><a class="dropdown-item" href="../articles/FAQ-vegan.html">Vegan FAQ</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/vegandevs/vegan/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Compares Dissimilarity Indices for Gradient Detection</h1>

      <div class="d-none name"><code>rankindex.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Rank correlations between dissimilarity indices
  and gradient separation.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">rankindex</span><span class="op">(</span><span class="va">grad</span>, <span class="va">veg</span>, indices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"euc"</span>, <span class="st">"man"</span>, <span class="st">"gow"</span>, <span class="st">"bra"</span>, <span class="st">"kul"</span><span class="op">)</span>,</span>
<span>          stepacross <span class="op">=</span> <span class="cn">FALSE</span>, method <span class="op">=</span> <span class="st">"spearman"</span>, </span>
<span>    metric <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"euclidean"</span>, <span class="st">"mahalanobis"</span>, <span class="st">"manhattan"</span>, <span class="st">"gower"</span><span class="op">)</span>,</span>
<span>    <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <p></p>
<dl><dt id="arg-grad">grad<a class="anchor" aria-label="anchor" href="#arg-grad"></a></dt>
<dd><p>The gradient variable or matrix.</p></dd>

  <dt id="arg-veg">veg<a class="anchor" aria-label="anchor" href="#arg-veg"></a></dt>
<dd><p>The community data matrix.</p></dd>

  <dt id="arg-indices">indices<a class="anchor" aria-label="anchor" href="#arg-indices"></a></dt>
<dd><p>Dissimilarity indices compared, partial matches to
    alternatives in <code><a href="vegdist.html">vegdist</a></code>.
    Alternatively, it can be a (named) list of functions returning
    objects of class 'dist'.</p></dd>

  <dt id="arg-stepacross">stepacross<a class="anchor" aria-label="anchor" href="#arg-stepacross"></a></dt>
<dd><p>Use <code><a href="stepacross.html">stepacross</a></code> to find
    a shorter path dissimilarity. The dissimilarities for site pairs
    with no shared species are set <code>NA</code> using
    <code><a href="distconnected.html">no.shared</a></code> so that indices with no fixed
    upper limit can also be analysed.</p></dd>

  <dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>Correlation method used.</p></dd>

  <dt id="arg-metric">metric<a class="anchor" aria-label="anchor" href="#arg-metric"></a></dt>
<dd><p>Metric to evaluate the gradient separation. See Details.</p></dd>

  <dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Other parameters to <code><a href="stepacross.html">stepacross</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>A good dissimilarity index for multidimensional scaling should have
  a high rank-order similarity with gradient separation.  The function
  compares most indices in <code><a href="vegdist.html">vegdist</a></code> against gradient
  separation using rank correlation coefficients in
  <code><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></code>. The gradient separation between each point is
  assessed using given <code>metric</code>. The default is to use Euclidean
  distance of continuous variables scaled to unit variance, or to use
  Gower metric for mixed data using function
  <code><a href="https://rdrr.io/pkg/cluster/man/daisy.html" class="external-link">daisy</a></code> when <code>grad</code> has factors. The other
  alternatives are Mahalanabis distances which are based on
  <code>grad</code> matrix scaled so that columns are orthogonal
  (uncorrelated) and have unit variance, or Manhattan distances of
  <code>grad</code> variables scaled to unit range.</p>
<p>The <code>indices</code> argument can accept any dissimilarity
  indices besides the ones calculated by the
  <code><a href="vegdist.html">vegdist</a></code> function. For this, the argument value
  should be a (possibly named) list of functions.
  Each function must return a valid 'dist' object with dissimilarities,
  similarities are not accepted and should be converted into dissimilarities
  beforehand.</p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a named vector of rank correlations.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Faith, F.P., Minchin, P.R. and Belbin,
  L. (1987).  Compositional dissimilarity as a robust measure of
    ecological distance. <em>Vegetatio</em> 69, 57-68.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Jari Oksanen, with additions from Peter Solymos</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>There are several problems in using rank correlation coefficients.
  Typically there are very many ties when \(n(n-1)/2\) gradient
  separation values are derived from just \(n\) observations.
  Due to floating point arithmetics, many tied values differ by
  machine epsilon and are arbitrarily ranked differently by
  <code><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank</a></code> used in <code><a href="https://rdrr.io/r/stats/cor.test.html" class="external-link">cor.test</a></code>.  Two indices
  which are identical with certain
  transformation or standardization may differ slightly
  (magnitude \(10^{-15}\)) and this may lead into third or fourth decimal
  instability in rank correlations.  Small differences in rank
  correlations should not be taken too seriously.  Probably this method
  should be replaced with a sounder method, but I do not yet know
  which...  You may experiment with <code><a href="mantel.html">mantel</a></code>,
  <code><a href="anosim.html">anosim</a></code> or even <code><a href="procrustes.html">protest</a></code>.</p>
<p>Earlier version of this function used <code>method = "kendall"</code>, but
  that is far too slow in large data sets.</p>
<p>The functions returning dissimilarity objects should be self contained,
  because the <code>...</code> argument passes additional parameters
  to <code><a href="stepacross.html">stepacross</a></code> and not to the functions supplied
  via the <code>indices</code> argument.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="vegdist.html">vegdist</a></code>, <code><a href="stepacross.html">stepacross</a></code>,
  <code><a href="distconnected.html">no.shared</a></code>, <code><a href="monoMDS.html">monoMDS</a></code>,
    <code><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></code>, <code><a href="https://rdrr.io/r/base/base-defunct.html" class="external-link">Machine</a></code>, and for
    alternatives <code><a href="anosim.html">anosim</a></code>, <code><a href="mantel.html">mantel</a></code> and
    <code><a href="procrustes.html">protest</a></code>.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">varespec</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">varechem</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## The variables are automatically scaled</span></span></span>
<span class="r-in"><span><span class="fu">rankindex</span><span class="op">(</span><span class="va">varechem</span>, <span class="va">varespec</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       euc       man       gow       bra       kul </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.2396330 0.2735087 0.2288358 0.2837910 0.2839834 </span>
<span class="r-in"><span><span class="fu">rankindex</span><span class="op">(</span><span class="va">varechem</span>, <span class="fu"><a href="decostand.html">wisconsin</a></span><span class="op">(</span><span class="va">varespec</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       euc       man       gow       bra       kul </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.4200990 0.4215642 0.3708606 0.4215642 0.4215642 </span>
<span class="r-in"><span><span class="co">## Using non vegdist indices as functions</span></span></span>
<span class="r-in"><span><span class="va">funs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Manhattan<span class="op">=</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/dist.html" class="external-link">dist</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"manhattan"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    Gower<span class="op">=</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">cluster</span><span class="fu">:::</span><span class="fu"><a href="https://rdrr.io/pkg/cluster/man/daisy.html" class="external-link">daisy</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"gower"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    Ochiai<span class="op">=</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="designdist.html">designdist</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"1-J/sqrt(A*B)"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">rankindex</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">varechem</span><span class="op">)</span>, <span class="va">varespec</span>, <span class="va">funs</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Manhattan     Gower    Ochiai </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.2735087 0.2288358 0.1696862 </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jari Oksanen, Gavin L. Simpson, F. Guillaume Blanchet, Roeland Kindt, Pierre Legendre, Peter R. Minchin, R.B. O’Hara, Peter Solymos, M. Henry H. Stevens, Eduard Szoecs, Helene Wagner, Matt Barbour, Michael Bedward, Ben Bolker, Daniel Borcard, Gustavo Carvalho, Michael Chirico, Miquel De Caceres, Sebastien Durand, Heloisa Beatriz Antoniazi Evangelista, Rich FitzJohn, Michael Friendly, Brendan Furneaux, Geoffrey Hannigan, Mark O. Hill, Leo Lahti, Dan McGlinn, Marie-Helene Ouellette, Eduardo Ribeiro Cunha, Tyler Smith, Adrian Stier, Cajo J.F. Ter Braak, James Weedon.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

