<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The function provides some popular (and effective) standardization
methods for community ecologists."><title>Standardization Methods for Community Ecology — decostand • vegan</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Standardization Methods for Community Ecology — decostand"><meta property="og:description" content="The function provides some popular (and effective) standardization
methods for community ecologists."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">vegan</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.6-5</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-vignettes">Vignettes</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-vignettes">
    <a class="dropdown-item" href="../articles/FAQ-vegan.html">Vegan FAQ</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/vegandevs/vegan/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Standardization Methods for Community Ecology</h1>
      
      <div class="d-none name"><code>decostand.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The function provides some popular (and effective) standardization
methods for community ecologists.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">decostand</span><span class="op">(</span><span class="va">x</span>, <span class="va">method</span>, <span class="va">MARGIN</span>, <span class="va">range.global</span>, logbase <span class="op">=</span> <span class="fl">2</span>, na.rm<span class="op">=</span><span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">wisconsin</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="fu">decobackstand</span><span class="op">(</span><span class="va">x</span>, zap <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>Community data, a matrix-like object. For
    <code>decobackstand</code> standardized data.</p></dd>

  <dt>method</dt>
<dd><p>Standardization method. See Details for available options.</p></dd>

  <dt>MARGIN</dt>
<dd><p>Margin, if default is not acceptable. <code>1</code> = rows,
    and <code>2</code> = columns of <code>x</code>.</p></dd>

  <dt>range.global</dt>
<dd><p>Matrix from which the range is found in
    <code>method = "range"</code>.  This allows using same ranges across
    subsets of data.  The dimensions of <code>MARGIN</code> must match with
    <code>x</code>.</p></dd>

  <dt>logbase</dt>
<dd><p>The logarithm base used in <code>method = "log"</code>.</p></dd>

  <dt>na.rm</dt>
<dd><p>Ignore missing values in row or column standardizations.</p></dd>

  <dt>zap</dt>
<dd><p>Make near-zero values exact zeros to avoid negative
    values and exaggerated estimates of species richness.</p></dd>

  <dt>...</dt>
<dd><p>Other arguments to the function (ignored).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function offers following standardization methods for community
  data:</p><ul><li><p><code>total</code>: divide by margin total (default <code>MARGIN = 1</code>).</p></li>
<li><p><code>max</code>: divide by margin maximum (default <code>MARGIN = 2</code>).</p></li>
<li><p><code>frequency</code>: divide by margin total and multiply by the
    number of non-zero items, so that the average of non-zero entries is
    one (Oksanen 1983; default <code>MARGIN = 2</code>).</p></li>
<li><p><code>normalize</code>: make margin sum of squares equal to one (default
    <code>MARGIN = 1</code>).</p></li>
<li><p><code>range</code>: standardize values into range 0 ... 1 (default
    <code>MARGIN = 2</code>).  If all values are constant, they will be
    transformed to 0.</p></li>
<li><p><code>rank, rrank</code>: <code>rank</code> replaces abundance values by
    their increasing ranks leaving zeros unchanged, and <code>rrank</code> is
    similar but uses relative ranks with maximum 1 (default
    <code>MARGIN = 1</code>). Average ranks are used for tied values.</p></li>
<li><p><code>standardize</code>: scale <code>x</code> to zero mean and unit variance
    (default <code>MARGIN = 2</code>).</p></li>
<li><p><code>pa</code>: scale <code>x</code> to presence/absence scale (0/1).</p></li>
<li><p><code>chi.square</code>: divide by row sums and square root of
    column sums, and adjust for square root of matrix total
    (Legendre &amp; Gallagher 2001). When used with the Euclidean
    distance, the distances should be similar to the
    Chi-square distance used in correspondence analysis. However, the
    results from <code><a href="https://rdrr.io/r/stats/cmdscale.html" class="external-link">cmdscale</a></code> would still differ, since
    CA is a weighted ordination method (default <code>MARGIN = 1</code>).</p></li>
<li><p><code>hellinger</code>: square root of <code>method = "total"</code>
    (Legendre &amp; Gallagher 2001).</p></li>
<li><p><code>log</code>: logarithmic transformation as suggested by
     Anderson et al. (2006): \(\log_b (x) + 1\) for
     \(x &gt; 0\), where \(b\) is the base of the logarithm; zeros are
     left as zeros. Higher bases give less weight to quantities and more
     to presences, and <code>logbase = Inf</code> gives the presence/absence
     scaling. Please note this is <em>not</em> \(\log(x+1)\).
     Anderson et al. (2006) suggested this for their (strongly) modified
     Gower distance (implemented as <code>method = "altGower"</code> in 
     <code><a href="vegdist.html">vegdist</a></code>), but the standardization can be used 
     independently of distance indices.</p></li>
<li><p><code>alr</code>: Additive log ratio ("alr") transformation
     (Aitchison 1986) reduces data skewness and compositionality
     bias. The transformation assumes positive values, pseudocounts can
     be added with the argument <code>pseudocount</code>. One of the
     rows/columns is a reference that can be given by <code>reference</code>
     (name of index). The first row/column is used by default
     (<code>reference = 1</code>).  Note that this transformation drops one
     row or column from the transformed output data. The <code>alr</code>
     transformation is defined formally as follows:
     $$alr = [log\frac{x_1}{x_D}, ..., log\frac{x_{D-1}}{x_D}]$$
     where the denominator sample \(x_D\) can be chosen
     arbitrarily. This transformation is often used with pH and other
     chemistry measurenments. It is also commonly used as multinomial
     logistic regression. Default <code>MARGIN = 1</code> uses row as the
     <code>reference</code>.</p></li>
<li><p><code>clr</code>: centered log ratio ("clr") transformation proposed by
     Aitchison (1986) and it is used to reduce data skewness and compositionality bias.
     This transformation has frequent applications in microbial ecology
     (see e.g. Gloor et al., 2017). The clr transformation is defined as:
     $$clr = log\frac{x}{g(x)} = log x - log g(x)$$     
     where \(x\) is a single value, and g(x) is the geometric mean of
     \(x\).
     The method can operate only with positive data;
     a common way to deal with zeroes is to add pseudocount
     (e.g. the smallest positive value in the data), either by
     adding it manually to the input data, or by using the argument
     <code>pseudocount</code> as in
     <code>decostand(x, method = "clr", pseudocount = 1)</code>. Adding
     pseudocount will inevitably introduce some bias; see
     the <code>rclr</code> method for one available solution.</p></li>
<li><p><code>rclr</code>: robust clr ("rclr") is similar to regular clr
     (see above) but allows data that contains zeroes. This method
     does not use pseudocounts, unlike the standard clr.
     The robust clr (rclr) divides the values by geometric mean
     of the observed features; zero values are kept as zeroes, and not
     taken into account. In high dimensional data,
     the geometric mean of rclr approximates the true
     geometric mean; see e.g. Martino et al. (2019)
     The <code>rclr</code> transformation is defined formally as follows:
     $$rclr = log\frac{x}{g(x &gt; 0)}$$
     where \(x\) is a single value, and \(g(x &gt; 0)\) is the geometric 
     mean of sample-wide values \(x\) that are positive (&gt; 0).</p></li>
</ul><p>Standardization, as contrasted to transformation, means that the
  entries are transformed relative to other entries.</p>
<p>All methods have a default margin. <code>MARGIN=1</code> means rows (sites
  in a normal data set) and <code>MARGIN=2</code> means columns (species in a
  normal data set).</p>
<p>Command <code>wisconsin</code> is a shortcut to common Wisconsin double
  standardization where species (<code>MARGIN=2</code>) are first standardized
  by maxima (<code>max</code>) and then sites (<code>MARGIN=1</code>) by
  site totals (<code>tot</code>).</p>
<p>Most standardization methods will give nonsense results with
  negative data entries that normally should not occur in the community
  data. If there are empty sites or species (or constant with
  <code>method =  "range"</code>), many standardization will change these into
  <code>NaN</code>.</p>
<p>Function <code>decobackstand</code> can be used to transform standardized
  data back to original. This is not possible for all standardization
  and may not be implemented to all cases where it would be
  possible. There are round-off errors and back-transformation is not
  exact, and it is wise not to overwrite the original data. With
  <code>zap=TRUE</code> original zeros should be exact.</p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>Returns the standardized data frame, and adds an attribute</p>
<p></p>
<p><code>"decostand"</code> giving the name of applied standardization</p>
<p></p>
<p><code>"method"</code> and attribute <code>"parameters"</code> with appropriate
  transformation parameters.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Jari Oksanen, Etienne Laliberté
  (<code>method = "log"</code>), Leo Lahti (<code>alr</code>, 
  <code>"clr"</code> and <code>"rclr"</code>).</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Common transformations can be made with standard <span style="R">R</span> functions.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
     

<p>Aitchison, J. The Statistical Analysis of Compositional Data (1986).
  London, UK: Chapman &amp; Hall.</p>
<p>Anderson, M.J., Ellingsen, K.E. &amp; McArdle, B.H. (2006) Multivariate
  dispersion as a measure of beta diversity. <em>Ecology Letters</em> 
  <strong>9</strong>, 683--693.</p>
<p>Egozcue, J.J., Pawlowsky-Glahn, V., Mateu-Figueras, G.,
  Barcel'o-Vidal, C. (2003) Isometric logratio transformations for
  compositional data analysis. <em>Mathematical Geology</em>
  <strong>35</strong>, 279--300.</p>
<p>Gloor, G.B., Macklaim, J.M., Pawlowsky-Glahn, V. &amp; Egozcue, J.J. (2017)
  Microbiome Datasets Are Compositional: And This Is Not Optional.
  <em>Frontiers in Microbiology</em> <strong>8</strong>, 2224.</p>
<p>Legendre, P. &amp; Gallagher, E.D. (2001) Ecologically meaningful
  transformations for ordination of species data. <em>Oecologia</em>
  <strong>129</strong>, 271--280.</p>
<p>Martino, C., Morton, J.T., Marotz, C.A., Thompson, L.R., Tripathi, A.,
  Knight, R. &amp; Zengler, K. (2019) A novel sparse compositional technique
  reveals microbial perturbations.
  <em>mSystems</em> <strong>4</strong>, 1.</p>
<p>Oksanen, J. (1983) Ordination of boreal heath-like vegetation with
  principal component analysis, correspondence analysis and
  multidimensional scaling. <em>Vegetatio</em> <strong>52</strong>, 181--189.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">varespec</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sptrans</span> <span class="op">&lt;-</span> <span class="fu">decostand</span><span class="op">(</span><span class="va">varespec</span>, <span class="st">"max"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">sptrans</span>, <span class="fl">2</span>, <span class="va">max</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Callvulg Empenigr Rhodtome Vaccmyrt Vaccviti Pinusylv Descflex Betupube </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        1        1        1        1        1        1        1        1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Vacculig Diphcomp   Dicrsp Dicrfusc Dicrpoly Hylosple Pleuschr Polypili </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        1        1        1        1        1        1        1        1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Polyjuni Polycomm Pohlnuta Ptilcili Barbhatc Cladarbu Cladrang Cladstel </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        1        1        1        1        1        1        1        1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cladunci Cladcocc Cladcorn Cladgrac Cladfimb Cladcris Cladchlo Cladbotr </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        1        1        1        1        1        1        1        1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cladamau   Cladsp Cetreric Cetrisla Flavniva Nepharct   Stersp Peltapht </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        1        1        1        1        1        1        1        1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Icmaeric Cladcerv Claddefo Cladphyl </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        1        1        1        1 </span>
<span class="r-in"><span><span class="va">sptrans</span> <span class="op">&lt;-</span> <span class="fu">wisconsin</span><span class="op">(</span><span class="va">varespec</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># CLR transformation for rows, with pseudocount</span></span></span>
<span class="r-in"><span><span class="va">varespec.clr</span> <span class="op">&lt;-</span> <span class="fu">decostand</span><span class="op">(</span><span class="va">varespec</span>, <span class="st">"clr"</span>, pseudocount<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ALR transformation for rows, with pseudocount and reference sample</span></span></span>
<span class="r-in"><span><span class="va">varespec.alr</span> <span class="op">&lt;-</span> <span class="fu">decostand</span><span class="op">(</span><span class="va">varespec</span>, <span class="st">"alr"</span>, pseudocount<span class="op">=</span><span class="fl">1</span>, reference<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Chi-square: PCA similar but not identical to CA.</span></span></span>
<span class="r-in"><span><span class="co">## Use wcmdscale for weighted analysis and identical results.</span></span></span>
<span class="r-in"><span><span class="va">sptrans</span> <span class="op">&lt;-</span> <span class="fu">decostand</span><span class="op">(</span><span class="va">varespec</span>, <span class="st">"chi.square"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="procrustes.html">procrustes</a></span><span class="op">(</span><span class="fu"><a href="cca.html">rda</a></span><span class="op">(</span><span class="va">sptrans</span><span class="op">)</span>, <span class="fu"><a href="cca.html">cca</a></span><span class="op">(</span><span class="va">varespec</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="decostand-1.png" alt="" width="700" height="1133"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Jari Oksanen, Gavin L. Simpson, F. Guillaume Blanchet, Roeland Kindt, Pierre Legendre, Peter R. Minchin, R.B. O’Hara, Peter Solymos, M. Henry H. Stevens, Eduard Szoecs, Helene Wagner, Matt Barbour, Michael Bedward, Ben Bolker, Daniel Borcard, Gustavo Carvalho, Michael Chirico, Miquel De Caceres, Sebastien Durand, Heloisa Beatriz Antoniazi Evangelista, Rich FitzJohn, Michael Friendly, Brendan Furneaux, Geoffrey Hannigan, Mark O. Hill, Leo Lahti, Dan McGlinn, Marie-Helene Ouellette, Eduardo Ribeiro Cunha, Tyler Smith, Adrian Stier, Cajo J.F. Ter Braak, James Weedon.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

