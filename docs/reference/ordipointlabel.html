<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Ordination Plots with Points and Optimized Locations for Text — ordipointlabel • vegan</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Ordination Plots with Points and Optimized Locations for Text — ordipointlabel"><meta name="description" content="Function produces ordination plots with points and text
  labels to the points. The points are in the fixed locations given by
  the ordination, but the locations of the text labels are optimized to
  minimize overplotting. The function is useful with moderately crowded
  ordination plots."><meta property="og:description" content="Function produces ordination plots with points and text
  labels to the points. The points are in the fixed locations given by
  the ordination, but the locations of the text labels are optimized to
  minimize overplotting. The function is useful with moderately crowded
  ordination plots."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">vegan</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.7-0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes"><li><a class="dropdown-item" href="../articles/FAQ-vegan.html">Vegan FAQ</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/vegandevs/vegan/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Ordination Plots with Points and Optimized Locations for Text</h1>

      <div class="d-none name"><code>ordipointlabel.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Function produces ordination plots with points and text
  labels to the points. The points are in the fixed locations given by
  the ordination, but the locations of the text labels are optimized to
  minimize overplotting. The function is useful with moderately crowded
  ordination plots.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ordipointlabel</span><span class="op">(</span><span class="va">x</span>, display <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sites"</span>, <span class="st">"species"</span><span class="op">)</span>, choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>   col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,  pch <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"o"</span>, <span class="st">"+"</span><span class="op">)</span>, font <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, </span>
<span>   cex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.7</span>, <span class="fl">0.7</span><span class="op">)</span>, add <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">inherits</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"ordiplot"</span><span class="op">)</span>, <span class="va">labels</span>, <span class="va">bg</span>, <span class="va">select</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'ordipointlabel'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <p></p>
<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>For <code>ordipointlabel</code> a result object from an
    ordination function or an ordination plot (possibly in a pipe). For
    <code>plot.ordipointlabel</code> an object from <code>ordipointlabel</code>.</p></dd>

  <dt id="arg-display">display<a class="anchor" aria-label="anchor" href="#arg-display"></a></dt>
<dd><p>Scores displayed in the plot. The default is to show
    <code>"sites"</code> and <code>"species"</code> that are available to many
    ordination methods, but there can be only one set or more than two
    set of scores to <code>display</code>.</p></dd>

  <dt id="arg-choices">choices<a class="anchor" aria-label="anchor" href="#arg-choices"></a></dt>
<dd><p>Axes shown.</p></dd>

  <dt id="arg-col-pch-font-cex">col, pch, font, cex<a class="anchor" aria-label="anchor" href="#arg-col-pch-font-cex"></a></dt>
<dd><p>Colours, point types, font style and
     character expansion for each kind of scores displayed in the
     plot. These should be vectors of the same length as the number of
     items in <code>display</code>, or if there is only one <code>display</code>
     they can be a vector of the length of number items.</p></dd>

  <dt id="arg-add">add<a class="anchor" aria-label="anchor" href="#arg-add"></a></dt>
<dd><p>Add to an existing plot. Default is <code>add = TRUE</code> when
     the function is used in a pipe, and <code>FALSE</code> usually.</p></dd>

  <dt id="arg-labels">labels<a class="anchor" aria-label="anchor" href="#arg-labels"></a></dt>
<dd><p>Labels used in graph. Species (variable) and SU (row)
    names are used if this is missing. Labels must be given in one
    vector for all scores of <code>display</code>. Function <code>labels</code> can
    extract the current name from a saved <code>ordipointlabel</code> object.</p></dd>

  <dt id="arg-bg">bg<a class="anchor" aria-label="anchor" href="#arg-bg"></a></dt>
<dd><p>Background colour for labels. If this is given, texts is
    drawn over non-transparent background. Either a single colour or
    vector of colours for each <code>display</code>, or with one display, for
    each label.</p></dd>

  <dt id="arg-select">select<a class="anchor" aria-label="anchor" href="#arg-select"></a></dt>
<dd><p>Items to be displayed.  This can either be a logical
    vector which is <code>TRUE</code> for displayed items or a vector of indices
    of displayed items. <code>select</code> is only used if a single set of
    scores is being plotted (i.e. <code>length(display) == 1</code>),
    otherwise it is ignored and a warning issued. If a logical vector is
    used, it must have the same length as the scores plotted.</p></dd>

  <dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Other arguments passed to <code><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></code> and
  <code><a href="https://rdrr.io/r/graphics/text.html" class="external-link">text</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>


<p>The function uses simulated annealing (<code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">optim</a></code>,
  <code>method = "SANN"</code>) to optimize the locations of the text labels
  to the points. There are eight possible locations: up, down, two sides
  and four corners. There is a weak preference to text away from zero,
  and a weak avoidance of corners. The locations and goodness of
  solution varies between runs, and there is no guarantee of finding the
  global optimum, or the same text locations twice. The optimization can
  take a long time in difficult cases with a high number of potential
  overlaps. Several sets of scores can be displayed in one plot.</p>
<p>The function can be used in a pipe where the first command is an
  ordination <code>plot</code> command with <code>type = "n"</code> or to add
  points and lablels to save <span class="pkg">vegan</span> ordination plot object. See
  examples.</p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The function returns invisibly an object of class
  <code>ordipointlabel</code> with items <code>xy</code> for coordinates of
  points, <code>labels</code> for coordinates of labels, items <code>pch</code>,
  <code>cex</code> and <code>font</code> for graphical parameters of each point or
  label. In addition, it returns the result of <code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">optim</a></code> as
  an attribute <code>"optim"</code>. The unit of overlap is the area
  of character <code>"m"</code>, and with varying graphical parameters the
  smallest alternative.</p>
<p>There is a <code>plot</code> method based on <code>orditkplot</code> but it
  does not alter or reset the graphical parameters via <code>par</code>.</p>
<p>The result object from <code>ordipointlabel</code> inherits from
  <code><a href="https://rdrr.io/pkg/vegan3d/man/orditkplot.html" class="external-link">orditkplot</a></code> of <span class="pkg">vegan3d</span> package, and it may
  be possible to further edit the result object with
  <code><a href="https://rdrr.io/pkg/vegan3d/man/orditkplot.html" class="external-link">orditkplot</a></code>, but for good results it is
  necessary that the points span the whole horizontal axis without empty
  margins.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>The function is invoked for one set of scores (one
  <code>display</code>) from <code><a href="ordiplot.html">text.ordiplot</a></code> and
  <code><a href="plot.cca.html">plot.cca</a></code> with argument <code>optimize = TRUE</code>.</p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Jari Oksanen</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">dune</span>, <span class="va">dune.env</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ord</span> <span class="op">&lt;-</span> <span class="fu"><a href="cca.html">cca</a></span><span class="op">(</span><span class="va">dune</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">ordipointlabel</span><span class="op">(</span><span class="va">ord</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="ordipointlabel-1.png" alt="" width="700" height="1133"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Use in a pipe: optimize species, sites &amp; centroids together</span></span></span>
<span class="r-in"><span><span class="va">ord</span> <span class="op">&lt;-</span> <span class="fu"><a href="cca.html">cca</a></span><span class="op">(</span><span class="va">dune</span> <span class="op">~</span> <span class="va">Management</span> <span class="op">+</span> <span class="va">Moisture</span>, <span class="va">dune.env</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">ord</span>, scaling <span class="op">=</span> <span class="st">"symmetric"</span>, type <span class="op">=</span> <span class="st">"n"</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">ordipointlabel</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sites"</span>,<span class="st">"species"</span>,<span class="st">"centroids"</span><span class="op">)</span>, cex<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.7</span>,<span class="fl">0.7</span>,<span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"black"</span>,<span class="st">"red"</span>,<span class="st">"blue"</span><span class="op">)</span>, font <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">3</span>,<span class="fl">1</span><span class="op">)</span>, pch<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span>, xpd<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/graphics/text.html" class="external-link">text</a></span><span class="op">(</span><span class="st">"biplot"</span>, col <span class="op">=</span> <span class="st">"blue"</span>, bg <span class="op">=</span> <span class="st">"white"</span>, cex<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="ordipointlabel-2.png" alt="" width="700" height="1133"></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in text.default(x$labels, labels = rownames(x$labels), cex = cex,     col = col, font = font, ...):</span> invalid font specification</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jari Oksanen, Gavin L. Simpson, F. Guillaume Blanchet, Roeland Kindt, Pierre Legendre, Peter R. Minchin, R.B. O’Hara, Peter Solymos, M. Henry H. Stevens, Eduard Szoecs, Helene Wagner, Matt Barbour, Michael Bedward, Ben Bolker, Daniel Borcard, Tuomas Borman, Gustavo Carvalho, Michael Chirico, Miquel De Caceres, Sebastien Durand, Heloisa Beatriz Antoniazi Evangelista, Rich FitzJohn, Michael Friendly, Brendan Furneaux, Geoffrey Hannigan, Mark O. Hill, Leo Lahti, Dan McGlinn, Marie-Helene Ouellette, Eduardo Ribeiro Cunha, Tyler Smith, Adrian Stier, Cajo J.F. Ter Braak, James Weedon.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

